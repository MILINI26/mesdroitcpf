<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vérifiez votre éligibilité CPF - Formation</title>
<style>
  * { box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin:0; padding:0;
    background: #f8fafc;
    color: #222;
    line-height: 1.5;
  }
  header {
    background: #003366;
    color: white;
    padding: 30px 20px;
    text-align: center;
  }
  header h1 {
    margin: 0;
    font-size: 1.9rem;
  }
  .logos {
    display: flex;
    justify-content: center;
    gap: 40px;
    padding: 25px 10px 15px 10px;
    flex-wrap: wrap;
    background: #e3ebf8;
  }
  .logos img {
    height: 70px;
    object-fit: contain;
  }
  nav {
    background: #0055a5;
    text-align: center;
    padding: 14px 0;
    margin-bottom: 20px;
  }
  nav a {
    color: white;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
  }
  nav a:hover {
    text-decoration: underline;
  }
  .warnings {
    max-width: 900px;
    margin: 0 auto 40px auto;
    color: red;
    font-weight: 700;
    font-size: 1.1rem;
    text-align: center;
    line-height: 1.3;
  }
  .warnings p {
    margin: 8px 0;
  }
  .formations {
    max-width: 1140px;
    margin: 0 auto 60px auto;
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    gap: 26px;
    padding: 0 15px;
  }
  .card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    cursor: pointer;
    transition: transform 0.22s ease;
  }
  .card:hover {
    transform: scale(1.06);
  }
  .card img {
    width: 100%;
    height: 170px;
    object-fit: cover;
  }
  .card-content {
    padding: 18px 16px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .card-content h3 {
    margin: 0 0 12px 0;
    font-size: 1.25rem;
    color: #003366;
  }
  .card-content p {
    flex-grow: 1;
    font-size: 0.95rem;
    color: #444;
    margin-bottom: 14px;
  }
  .btn-eligibilite {
    background: #e30613;
    color: white;
    font-weight: 700;
    padding: 11px 0;
    text-align: center;
    border-radius: 6px;
    user-select: none;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }
  .btn-eligibilite:hover {
    background-color: #b2040f;
  }
  section#formulaire {
    max-width: 600px;
    margin: 0 auto 80px auto;
    background: white;
    padding: 32px 28px;
    border-radius: 12px;
    box-shadow: 0 5px 24px rgba(0,0,0,0.12);
  }
  section#formulaire h2 {
    text-align: center;
    color: #003366;
    margin-bottom: 30px;
    font-size: 1.8rem;
  }
  form label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    font-size: 1rem;
  }
  form input, form select, form textarea {
    width: 100%;
    padding: 11px 13px;
    margin-bottom: 22px;
    border: 1.6px solid #ccc;
    border-radius: 7px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
  }
  form input:focus, form select:focus, form textarea:focus {
    border-color: #0055a5;
    outline: none;
  }
  form button {
    background: #e30613;
    color: white;
    font-weight: 700;
    border: none;
    padding: 15px 0;
    width: 100%;
    font-size: 1.15rem;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  form button:hover {
    background-color: #b2040f;
  }
  #thankYouMessage {
    display: none;
    text-align: center;
    font-weight: 700;
    font-size: 1.2rem;
    color: green;
    padding: 30px 0;
  }
  @media (max-width: 700px) {
    .formations {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Vérifiez votre éligibilité aux formations CPF</h1>
</header>

<div class="logos" aria-label="Logos officiels partenaires">
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/2b/Logo_CPF.svg" alt="Logo CPF" />
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Logo_Qualiopi.svg/512px-Logo_Qualiopi.svg.png" alt="Logo Qualiopi" />
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/15/Embl%C3%A8me_de_la_R%C3%A9publique_fran%C3%A7aise_%28coq_gaulois%29.svg" alt="Logo République Française" />
</div>

<nav>
  <a href="#formulaire">Vérifier votre éligibilité</a>
</nav>

<div class="warnings" role="alert" aria-live="assertive">
  <p>⚠️ Nous ne proposons plus le financement du CACES ou du Permis de Conduire.</p>
  <p>⚠️ Les étudiants ne sont pas éligibles au financement des formations par le CPF.</p>
  <p>⚠️ Nous proposons UNIQUEMENT les formations qui se trouvent dans le formulaire ci-dessous.</p>
</div>

<section class="formations" aria-label="Liste des formations">

</section>

<section id="formulaire" aria-label="Formulaire d'éligibilité CPF">
  <h2>Formulaire d’éligibilité</h2>
  <form id="eligibiliteForm">
    <label for="nom">Nom complet *</label>
    <input type="text" id="nom" name="nom" required />

    <label for="email">Email *</label>
    <input type="email" id="email" name="email" required />

    <label for="telephone">Téléphone *</label>
    <input type="tel" id="telephone" name="telephone" required />

    <label for="formation">Formation souhaitée *</label>
    <select id="formation" name="formation" required>
      <option value="" disabled selected>-- Choisissez une formation --</option>
    </select>

    <button type="submit">Envoyer ma demande</button>
  </form>
  <div id="thankYouMessage" role="status" aria-live="polite" tabindex="0">
    Merci pour votre demande !<br />
    Ne soumettez pas une nouvelle demande.<br />
    Vous serez recontacté rapidement et recevrez le code de suivi AR26.
  </div>
</section>

<script>
  const formations = [
    {
      titre: "Anglais",
      desc: "Améliorez votre anglais professionnel et courant.",
      img: "https://cdn.pixabay.com/photo/2016/02/19/11/53/english-1209649_960_720.jpg"
    },
    {
      titre: "Espagnol",
      desc: "Apprenez l'espagnol pour voyager et travailler.",
      img: "https://cdn.pixabay.com/photo/2017/01/20/00/30/flags-1993661_960_720.jpg"
    },
    {
      titre: "Italien",
      desc: "Maîtrisez l'italien, langue de culture et d'affaires.",
      img: "https://cdn.pixabay.com/photo/2018/01/29/09/48/italy-3116755_960_720.jpg"
    },
    {
      titre: "Allemand",
      desc: "Apprenez l'allemand pour élargir vos opportunités professionnelles.",
      img: "https://cdn.pixabay.com/photo/2014/04/03/10/16/germany-310492_960_720.png"
    },
    {
      titre: "Excel",
      desc: "Devenez expert en Excel et améliorez votre productivité.",
      img: "https://cdn.pixabay.com/photo/2017/06/09/09/14/excel-2389217_960_720.jpg"
    },
    {
      titre: "Word",
      desc: "Maîtrisez Microsoft Word pour vos documents professionnels.",
      img: "https://cdn.pixabay.com/photo/2015/12/08/00/28/microsoft-1080600_960_720.jpg"
    },
    {
      titre: "PowerPoint",
      desc: "Créez des présentations impactantes avec PowerPoint.",
      img: "https://cdn.pixabay.com/photo/2016/11/29/02/30/presentation-1869711_960_720.jpg"
    },
    {
      titre: "Wordpress",
      desc: "Apprenez à créer et gérer un site avec Wordpress.",
      img: "https://cdn.pixabay.com/photo/2015/03/26/09/40/wordpress-690438_960_720.jpg"
    },
    {
      titre: "Photoshop",
      desc: "Maîtrisez les bases de Photoshop pour vos créations graphiques.",
      img: "https://cdn.pixabay.com/photo/2016/03/27/07/08/photoshop-1280537_960_720.jpg"
    },
    {
      titre: "Illustrator",
      desc: "Créez des illustrations vectorielles avec Illustrator.",
      img: "https://cdn.pixabay.com/photo/2015/09/14/16/36/illustrator-938071_960_720.jpg"
    },
    {
      titre: "IA (intelligence artificiel)",
      desc: "Découvrez les fondamentaux de l'intelligence artificielle.",
      img: "https://cdn.pixabay.com/photo/2018/02/15/13/23/artificial-intelligence-3158251_960_720.jpg"
    },
    {
      titre: "Portugais",
      desc: "Apprenez le portugais pour voyager et communiquer.",
      img: "https://cdn.pixabay.com/photo/2015/04/10/00/41/brazil-715135_960_720.jpg"
    },
    {
      titre: "Technicien administratif (secrétariat)",
      desc: "Formation pour devenir technicien administratif compétent.",
      img: "https://cdn.pixabay.com/photo/2017/08/10/07/30/business-2616284_960_720.jpg"
    },
    {
      titre: "Couture et mode",
      desc: "Apprenez les bases de la couture et création de mode.",
      img: "https://cdn.pixabay.com/photo/2017/08/07/20/35/sewing-2603071_960_720.jpg"
    },
    {
      titre: "Bilan de compétence",
      desc: "Évaluez vos compétences et planifiez votre avenir professionnel.",
      img: "https://cdn.pixabay.com/photo/2017/05/10/20/28/business-2309518_960_720.jpg"
    },
    {
      titre: "Pâtisserie",
      desc: "Maîtrisez l'art de la pâtisserie française.",
      img: "https://cdn.pixabay.com/photo/2017/05/08/13/26/cake-2305192_960_720.jpg"
    },
    {
      titre: "Petite enfance",
      desc: "Formation pour travailler avec les jeunes enfants.",
      img: "https://cdn.pixabay.com/photo/2016/01/19/17/39/child-1149032_960_720.jpg"
    }
  ];

  const container = document.querySelector('.formations');
  const selectFormation = document.querySelector('#formation');

  formations.forEach(f => {
    // Création des cartes de formation
    const card = document.createElement('div');
    card.className = 'card';
    card.tabIndex = 0;
    card.setAttribute('role', 'button');
    card.setAttribute('aria-label', `Vérifier l'éligibilité pour la formation ${f.titre}`);

    card.innerHTML = `
      <img src="${f.img}" alt="Image représentant la formation ${f.titre}" />
      <div class="card-content">
        <h3>${f.titre}</h3>
        <p>${f.desc}</p>
        <div class="btn-eligibilite" tabindex="0">Vérifier votre éligibilité</div>
      </div>
    `;

    container.appendChild(card);

    // Clique sur la carte ou bouton amène au formulaire et sélectionne la formation
    card.querySelector('.btn-eligibilite').addEventListener('click', () => scrollToForm(f.titre));
    card.addEventListener('click', () => scrollToForm(f.titre));
    card.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' || e.key === ' ') scrollToForm(f.titre);
    });

    // Ajout des options au select dans le formulaire
    const option = document.createElement('option');
    option.value = f.titre;
    option.textContent = f.titre;
    selectFormation.appendChild(option);
  });

  function scrollToForm(formation) {
    selectFormation.value = formation;
    document.getElementById("formulaire").scrollIntoView({ behavior: 'smooth' });
    selectFormation.focus();
  }

  const form = document.getElementById("eligibiliteForm");
  const message = document.getElementById("thankYouMessage");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const data = new FormData(form);
    const payload = Object.fromEntries(data.entries());

    try {
      await fetch("https://script.google.com/macros/s/AKfycbyvFDCrylG0OTBK98FBVBhySdHww-vW9X0KpOwtv3S2lwWc8yScqFeLSUbCZu69KDZr/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      form.reset();
      form.style.display = "none";
      message.style.display = "block";
      message.focus();
    } catch (err) {
      alert("Erreur lors de l'envoi. Veuillez réessayer.");
    }
  });
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vérifiez votre éligibilité CPF - Formation professionnelle</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    background: #f8fafc;
    color: #222;
    line-height: 1.5;
  }
  header {
    background: #003366;
    color: white;
    padding: 30px 20px;
    text-align: center;
  }
  header h1 {
    margin: 0;
    font-size: 2rem;
  }
  /* Logos partenaires */
  .logos {
    display: flex;
    justify-content: center;
    gap: 40px;
    padding: 25px 10px 15px 10px;
    flex-wrap: wrap;
    background: #e3ebf8;
  }
  .logos img {
    height: 70px;
    object-fit: contain;
  }
  /* Navigation */
  nav {
    background: #0055a5;
    text-align: center;
    padding: 14px 0;
    margin-bottom: 20px;
  }
  nav a {
    color: white;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
  }
  nav a:hover {
    text-decoration: underline;
  }
  /* Warnings */
  .warnings {
    max-width: 900px;
    margin: 0 auto 40px auto;
    color: #b02a2a;
    font-weight: 700;
    font-size: 1.1rem;
    text-align: center;
    line-height: 1.3;
  }
  .warnings p {
    margin: 8px 0;
  }
  /* Formations Grid */
  .formations {
    max-width: 1140px;
    margin: 0 auto 60px auto;
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    gap: 26px;
    padding: 0 15px;
  }
  .card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    cursor: pointer;
    transition: transform 0.22s ease;
  }
  .card:hover {
    transform: scale(1.06);
  }
  .card img {
    width: 100%;
    height: 170px;
    object-fit: cover;
  }
  .card-content {
    padding: 18px 16px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .card-content h3 {
    margin: 0 0 12px 0;
    font-size: 1.25rem;
    color: #003366;
  }
  .card-content p {
    flex-grow: 1;
    font-size: 0.95rem;
    color: #444;
    margin-bottom: 14px;
  }
  .btn-eligibilite {
    background: #e30613;
    color: white;
    font-weight: 700;
    padding: 11px 0;
    text-align: center;
    border-radius: 6px;
    user-select: none;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }
  .btn-eligibilite:hover {
    background-color: #b2040f;
  }
  /* Formulaire */
  section#formulaire {
    max-width: 600px;
    margin: 0 auto 80px auto;
    background: white;
    padding: 32px 28px;
    border-radius: 12px;
    box-shadow: 0 5px 24px rgba(0,0,0,0.12);
  }
  section#formulaire h2 {
    text-align: center;
    color: #003366;
    margin-bottom: 30px;
    font-size: 1.8rem;
  }
  form label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    font-size: 1rem;
  }
  form input, form select, form textarea {
    width: 100%;
    padding: 11px 13px;
    margin-bottom: 22px;
    border: 1.6px solid #ccc;
    border-radius: 7px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
  }
  form input:focus, form select:focus, form textarea:focus {
    border-color: #0055a5;
    outline: none;
  }
  form button {
    background: #e30613;
    color: white;
    font-weight: 700;
    border: none;
    padding: 15px 0;
    width: 100%;
    font-size: 1.15rem;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  form button:hover {
    background-color: #b2040f;
  }
  #thankYouMessage {
    display: none;
    text-align: center;
    font-weight: 700;
    font-size: 1.2rem;
    color: green;
    padding: 30px 0;
  }
  /* Informations supplémentaires */
  .info-section {
    max-width: 900px;
    margin: 0 auto 80px auto;
    padding: 0 15px;
    color: #222;
  }
  .info-section h2 {
    color: #003366;
    font-size: 1.8rem;
    margin-bottom: 20px;
    text-align: center;
  }
  .info-section p {
    font-size: 1rem;
    margin-bottom: 14px;
  }
  .info-section ul {
    list-style: disc inside;
    margin-left: 0;
    margin-bottom: 30px;
  }
  .info-section ul li {
    margin-bottom: 8px;
  }
  /* Responsive */
  @media (max-width: 700px) {
    .formations {
      grid-template-columns: 1fr;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Vérifiez votre éligibilité aux formations CPF</h1>
</header>

<div class="logos" aria-label="Logos officiels partenaires">
  <img src="https://upload.wikimedia.org/wikipedia/commons/2/2b/Logo_CPF.svg" alt="Logo CPF" />
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/02/Logo_Qualiopi.svg/512px-Logo_Qualiopi.svg.png" alt="Logo Qualiopi" />
  <img src="https://upload.wikimedia.org/wikipedia/commons/1/15/Embl%C3%A8me_de_la_R%C3%A9publique_fran%C3%A7aise_%28coq_gaulois%29.svg" alt="Logo République Française" />
</div>

<nav>
  <a href="#formulaire">Vérifier votre éligibilité</a>
</nav>

<div class="warnings" role="alert" aria-live="assertive">
  <p>⚠️ Nous ne proposons plus le financement du CACES ou du Permis de Conduire.</p>
  <p>⚠️ Les étudiants ne sont pas éligibles au financement des formations par le CPF.</p>
  <p>⚠️ Nous proposons UNIQUEMENT les formations listées ci-dessous.</p>
</div>

<section class="formations" aria-label="Liste des formations">

</section>

<section class="info-section" aria-label="Informations sur le CPF">
  <h2>Qu'est-ce que le CPF ?</h2>
  <p>Le Compte Personnel de Formation (CPF) est un dispositif public qui permet à tout actif, dès son entrée sur le marché du travail et jusqu'à la retraite, d'acquérir des droits à la formation mobilisables tout au long de sa vie professionnelle.</p>
  <p>Ces droits peuvent être utilisés pour financer des formations certifiantes, qualifiantes ou diplômantes afin d'améliorer vos compétences ou changer de métier.</p>
  <p>Notre organisme vous propose des formations éligibles au CPF pour booster votre carrière professionnelle.</p>
</section>

<section id="formulaire" aria-label="Formulaire d'éligibilité CPF">
  <h2>Formulaire d’éligibilité</h2>
  <form id="eligibiliteForm" novalidate>
    <label for="nom">Nom complet *</label>
    <input type="text" id="nom" name="nom" required autocomplete="name" placeholder="Votre nom complet" />

    <label for="email">Email *</label>
    <input type="email" id="email" name="email" required autocomplete="email" placeholder="exemple@domaine.com" />

    <label for="telephone">Téléphone *</label>
    <input type="tel" id="telephone" name="telephone" required autocomplete="tel" placeholder="06 12 34 56 78" pattern="[\d\s\+\-]+" />

    <label for="formation">Formation souhaitée *</label>
    <select id="formation" name="formation" required>
      <option value="" disabled selected>-- Choisissez une formation --</option>
    </select>

    <button type="submit">Envoyer ma demande</button>
  </form>
  <div id="thankYouMessage" role="status" aria-live="polite" tabindex="0">
    Merci pour votre demande !<br />
    Ne soumettez pas une nouvelle demande.<br />
    Vous serez recontacté rapidement et recevrez le code de suivi AR26.
  </div>
</section>

<script>
  // Liste complète des formations avec images fiables
  const formations = [
    {
      titre: "Anglais",
      desc: "Améliorez votre anglais professionnel et courant.",
      img: "https://cdn.pixabay.com/photo/2016/02/19/11/53/english-1209649_960_720.jpg"
    },
    {
      titre: "Espagnol",
      desc: "Apprenez l'espagnol pour voyager et travailler.",
      img: "https://cdn.pixabay.com/photo/2017/01/20/00/30/flags-1993661_960_720.jpg"
    },
    {
      titre: "Italien",
      desc: "Maîtrisez l'italien, langue de culture et d'affaires.",
      img: "https://cdn.pixabay.com/photo/2018/01/29/09/48/italy-3116755_960_720.jpg"
    },
    {
      titre: "Allemand",
      desc: "Apprenez l'allemand pour élargir vos opportunités professionnelles.",
      img: "https://cdn.pixabay.com/photo/2014/04/03/10/16/germany-310492_960_720.png"
    },
    {
      titre: "Excel",
      desc: "Devenez expert en Excel et améliorez votre productivité.",
      img: "https://cdn.pixabay.com/photo/2017/06/09/09/14/excel-2389217_960_720.jpg"
    },
    {
      titre: "Word",
      desc: "Maîtrisez Microsoft Word pour vos documents professionnels.",
      img: "https://cdn.pixabay.com/photo/2017/02/01/22/02/keyboard-2037867_960_720.jpg"
    },
    {
      titre: "PowerPoint",
      desc: "Créez des présentations percutantes avec PowerPoint.",
      img: "https://cdn.pixabay.com/photo/2017/01/20/00/30/flags-1993661_960_720.jpg"
    },
    {
      titre: "Photoshop",
      desc: "Apprenez à utiliser Photoshop pour la retouche photo.",
      img: "https://cdn.pixabay.com/photo/2017/01/31/14/45/photoshop-2029991_960_720.png"
    },
    {
      titre: "Bureautique",
      desc: "Formation complète en bureautique pour tous niveaux.",
      img: "https://cdn.pixabay.com/photo/2015/06/24/15/45/office-819279_960_720.jpg"
    },
    {
      titre: "Marketing Digital",
      desc: "Développez vos compétences en marketing digital.",
      img: "https://cdn.pixabay.com/photo/2016/11/29/09/08/marketing-1869716_960_720.jpg"
    }
  ];

  // Affiche les cartes de formation
  const container = document.querySelector(".formations");
  formations.forEach(({titre, desc, img}) => {
    const card = document.createElement("article");
    card.className = "card";
    card.innerHTML = `
      <img src="${img}" alt="Image formation ${titre}" loading="lazy" />
      <div class="card-content">
        <h3>${titre}</h3>
        <p>${desc}</p>
        <div class="btn-eligibilite" role="button" tabindex="0" aria-label="Vérifier l'éligibilité à la formation ${titre}">Vérifier l’éligibilité</div>
      </div>
    `;
    // Scroll vers le formulaire et préselection de la formation quand clic bouton
    card.querySelector(".btn-eligibilite").addEventListener("click", () => {
      document.getElementById("formation").value = titre;
      document.getElementById("nom").focus();
      window.location.href = "#formulaire";
    });
    container.appendChild(card);
  });

  // Remplit la liste déroulante du formulaire
  const selectFormation = document.getElementById("formation");
  formations.forEach(({titre}) => {
    const option = document.createElement("option");
    option.value = titre;
    option.textContent = titre;
    selectFormation.appendChild(option);
  });

  // Soumission du formulaire avec fetch POST vers Apps Script
  const form = document.getElementById("eligibiliteForm");
  const thankYouMsg = document.getElementById("thankYouMessage");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // Validation simple HTML5, sinon tu peux ajouter du JS plus poussé ici

    const data = {
      nom: form.nom.value.trim(),
      email: form.email.value.trim(),
      telephone: form.telephone.value.trim(),
      formation: form.formation.value
    };

    // POST JSON vers Apps Script
    try {
      const response = await fetch("https://script.google.com/macros/s/AKfycbyPXA-SHsztdadlDlqY9tKCOgAqiTlX0TDsR_buW8Q/exec", {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      // Affiche message de succès (même si pas de réponse visible à cause no-cors)
      thankYouMsg.style.display = "block";
      form.style.display = "none";
      thankYouMsg.focus();

    } catch (error) {
      alert("Erreur lors de l'envoi du formulaire. Veuillez réessayer plus tard.");
      console.error(error);
    }
  });
</script>

</body>
</html>
